"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/portfolio/route";
exports.ids = ["app/api/portfolio/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fportfolio%2Froute&page=%2Fapi%2Fportfolio%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fportfolio%2Froute.ts&appDir=D%3A%5CAssessment%20Task%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CAssessment%20Task&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fportfolio%2Froute&page=%2Fapi%2Fportfolio%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fportfolio%2Froute.ts&appDir=D%3A%5CAssessment%20Task%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CAssessment%20Task&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_Assessment_Task_app_api_portfolio_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/portfolio/route.ts */ \"(rsc)/./app/api/portfolio/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/portfolio/route\",\n        pathname: \"/api/portfolio\",\n        filename: \"route\",\n        bundlePath: \"app/api/portfolio/route\"\n    },\n    resolvedPagePath: \"D:\\\\Assessment Task\\\\app\\\\api\\\\portfolio\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Assessment_Task_app_api_portfolio_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/portfolio/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwb3J0Zm9saW8lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnBvcnRmb2xpbyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnBvcnRmb2xpbyUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDQXNzZXNzbWVudCUyMFRhc2slNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUQlM0ElNUNBc3Nlc3NtZW50JTIwVGFzayZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNFO0FBQy9FO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9ydGZvbGlvLWRhc2hib2FyZC8/ZTRiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJEOlxcXFxBc3Nlc3NtZW50IFRhc2tcXFxcYXBwXFxcXGFwaVxcXFxwb3J0Zm9saW9cXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3BvcnRmb2xpby9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3BvcnRmb2xpb1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcG9ydGZvbGlvL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcQXNzZXNzbWVudCBUYXNrXFxcXGFwcFxcXFxhcGlcXFxccG9ydGZvbGlvXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3BvcnRmb2xpby9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fportfolio%2Froute&page=%2Fapi%2Fportfolio%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fportfolio%2Froute.ts&appDir=D%3A%5CAssessment%20Task%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CAssessment%20Task&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/portfolio/route.ts":
/*!************************************!*\
  !*** ./app/api/portfolio/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _app_lib_schemas__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app/lib/schemas */ \"(rsc)/./app/lib/schemas.ts\");\n/* harmony import */ var _app_lib_calc__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/app/lib/calc */ \"(rsc)/./app/lib/calc.ts\");\n/* harmony import */ var _app_lib_limits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/app/lib/limits */ \"(rsc)/./app/lib/limits.ts\");\n\n\n\n\nasync function POST(request) {\n    try {\n        let holdings = [];\n        try {\n            const body = await request.json();\n            if (Array.isArray(body)) {\n                holdings = body;\n            }\n        } catch  {\n            const seedData = await __webpack_require__.e(/*! import() */ \"_rsc_data_holdings_json\").then(__webpack_require__.t.bind(__webpack_require__, /*! @/data/holdings.json */ \"(rsc)/./data/holdings.json\", 19));\n            holdings = seedData.default;\n        }\n        const validatedHoldings = holdings.map((holding, index)=>{\n            try {\n                return _app_lib_schemas__WEBPACK_IMPORTED_MODULE_1__.HoldingInputSchema.parse(holding);\n            } catch (error) {\n                throw new Error(`Invalid holding at index ${index}: ${error}`);\n            }\n        });\n        const enrichedHoldings = (0,_app_lib_calc__WEBPACK_IMPORTED_MODULE_2__.enrichHoldings)(validatedHoldings);\n        const enrichedWithLiveData = await Promise.all(enrichedHoldings.map(async (holding)=>{\n            try {\n                const [quoteResponse, metricsResponse] = await Promise.allSettled([\n                    (0,_app_lib_limits__WEBPACK_IMPORTED_MODULE_3__.rateLimitedRequest)(async ()=>{\n                        const response = await fetch(`${request.nextUrl.origin}/api/quote?symbol=${holding.symbol}&exchange=${holding.exchange}`);\n                        if (!response.ok) throw new Error(`Quote API failed: ${response.statusText}`);\n                        return response.json();\n                    }),\n                    (0,_app_lib_limits__WEBPACK_IMPORTED_MODULE_3__.rateLimitedRequest)(async ()=>{\n                        const response = await fetch(`${request.nextUrl.origin}/api/metrics?symbol=${holding.symbol}&exchange=${holding.exchange}`);\n                        if (!response.ok) throw new Error(`Metrics API failed: ${response.statusText}`);\n                        return response.json();\n                    })\n                ]);\n                let cmp;\n                let stale = false;\n                if (quoteResponse.status === \"fulfilled\") {\n                    cmp = quoteResponse.value.cmp;\n                    stale = quoteResponse.value.fromCache || false;\n                }\n                let peRatio;\n                let latestEarnings;\n                if (metricsResponse.status === \"fulfilled\") {\n                    peRatio = metricsResponse.value.peRatio;\n                    latestEarnings = metricsResponse.value.latestEarnings;\n                }\n                const presentValue = cmp ? cmp * holding.qty : undefined;\n                const gainLoss = presentValue ? presentValue - holding.investment : undefined;\n                return {\n                    ...holding,\n                    cmp,\n                    presentValue,\n                    gainLoss,\n                    peRatio,\n                    latestEarnings,\n                    stale\n                };\n            } catch (error) {\n                console.error(`Error fetching data for ${holding.symbol}:`, error);\n                return {\n                    ...holding,\n                    cmp: undefined,\n                    presentValue: undefined,\n                    gainLoss: undefined,\n                    peRatio: undefined,\n                    latestEarnings: undefined,\n                    stale: false\n                };\n            }\n        }));\n        const sectorGroups = (0,_app_lib_calc__WEBPACK_IMPORTED_MODULE_2__.groupBySector)(enrichedWithLiveData);\n        const sectors = {};\n        for (const [sectorName, sectorHoldings] of Object.entries(sectorGroups)){\n            const totals = (0,_app_lib_calc__WEBPACK_IMPORTED_MODULE_2__.computeSectorTotals)(sectorHoldings);\n            sectors[sectorName] = {\n                holdings: sectorHoldings,\n                ...totals\n            };\n        }\n        const totals = (0,_app_lib_calc__WEBPACK_IMPORTED_MODULE_2__.computePortfolioTotals)(enrichedWithLiveData);\n        const holdingsWithPercentages = enrichedWithLiveData.map((holding)=>({\n                ...holding,\n                portfolioPercent: totals.totalInvestment > 0 ? holding.investment / totals.totalInvestment * 100 : undefined\n            }));\n        const response = {\n            holdings: holdingsWithPercentages,\n            totals,\n            sectors,\n            lastUpdated: new Date().toISOString()\n        };\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(response);\n    } catch (error) {\n        console.error(\"Portfolio API error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to process portfolio data\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET() {\n    try {\n        const seedData = await __webpack_require__.e(/*! import() */ \"_rsc_data_holdings_json\").then(__webpack_require__.t.bind(__webpack_require__, /*! @/data/holdings.json */ \"(rsc)/./data/holdings.json\", 19));\n        const holdings = seedData.default;\n        const validatedHoldings = holdings.map((holding, index)=>{\n            try {\n                return _app_lib_schemas__WEBPACK_IMPORTED_MODULE_1__.HoldingInputSchema.parse(holding);\n            } catch (error) {\n                throw new Error(`Invalid holding at index ${index}: ${error}`);\n            }\n        });\n        const enrichedHoldings = (0,_app_lib_calc__WEBPACK_IMPORTED_MODULE_2__.enrichHoldings)(validatedHoldings);\n        const sectorGroups = (0,_app_lib_calc__WEBPACK_IMPORTED_MODULE_2__.groupBySector)(enrichedHoldings);\n        const sectors = {};\n        for (const [sectorName, sectorHoldings] of Object.entries(sectorGroups)){\n            const totals = (0,_app_lib_calc__WEBPACK_IMPORTED_MODULE_2__.computeSectorTotals)(sectorHoldings);\n            sectors[sectorName] = {\n                holdings: sectorHoldings,\n                ...totals\n            };\n        }\n        const totals = (0,_app_lib_calc__WEBPACK_IMPORTED_MODULE_2__.computePortfolioTotals)(enrichedHoldings);\n        const response = {\n            holdings: enrichedHoldings,\n            totals,\n            sectors,\n            lastUpdated: new Date().toISOString()\n        };\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(response);\n    } catch (error) {\n        console.error(\"Portfolio GET API error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to process portfolio data\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG9MQUFPO1FBQzlCLE1BQU1MLFdBQVdLLFNBQVNDLE9BQU87UUFFakMsTUFBTUMsb0JBQW9CUCxTQUFTUSxHQUFHLENBQUMsQ0FBQ0MsU0FBU0M7WUFDL0MsSUFBSTtnQkFDRixPQUFPbEIsZ0VBQWtCQSxDQUFDbUIsS0FBSyxDQUFDRjtZQUNsQyxFQUFFLE9BQU9HLE9BQU87Z0JBQ2QsTUFBTSxJQUFJQyxNQUFNLENBQUMseUJBQXlCLEVBQUVILE1BQU0sRUFBRSxFQUFFRSxNQUFNLENBQUM7WUFDL0Q7UUFDRjtRQUVBLE1BQU1FLG1CQUFtQnJCLDZEQUFjQSxDQUFDYztRQUV4QyxNQUFNbUMsZUFBZWhELDREQUFhQSxDQUFDb0I7UUFFbkMsTUFBTTZCLFVBQStCLENBQUM7UUFDdEMsS0FBSyxNQUFNLENBQUNDLFlBQVlDLGVBQWUsSUFBSUMsT0FBT0MsT0FBTyxDQUFDTCxjQUFlO1lBQ3ZFLE1BQU1NLFNBQVNyRCxrRUFBbUJBLENBQUNrRDtZQUNuQ0YsT0FBTyxDQUFDQyxXQUFXLEdBQUc7Z0JBQ3BCNUMsVUFBVTZDO2dCQUNWLEdBQUdHLE1BQU07WUFDWDtRQUNGO1FBRUEsTUFBTUEsU0FBU3BELHFFQUFzQkEsQ0FBQ2tCO1FBRXRDLE1BQU1PLFdBQThCO1lBQ2xDckIsVUFBVWM7WUFDVmtDO1lBQ0FMO1lBQ0FTLGFBQWEsSUFBSUMsT0FBT0MsV0FBVztRQUNyQztRQUVBLE9BQU8vRCxrRkFBWUEsQ0FBQ1csSUFBSSxDQUFDbUI7SUFDM0IsRUFBRSxPQUFPVCxPQUFPO1FBQ2Q2QixRQUFRN0IsS0FBSyxDQUFDLDRCQUE0QkE7UUFDMUMsT0FBT3JCLGtGQUFZQSxDQUFDVyxJQUFJLENBQ3RCO1lBQ0VVLE9BQU87WUFDUDJDLFNBQVMzQyxpQkFBaUJDLFFBQVFELE1BQU00QyxPQUFPLEdBQUc7UUFDcEQsR0FDQTtZQUFFekIsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb3J0Zm9saW8tZGFzaGJvYXJkLy4vYXBwL2FwaS9wb3J0Zm9saW8vcm91dGUudHM/OTBlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBIb2xkaW5nSW5wdXRTY2hlbWEsIFBvcnRmb2xpb1Jlc3BvbnNlU2NoZW1hLCBQb3J0Zm9saW9SZXNwb25zZSwgSG9sZGluZ0VucmljaGVkIH0gZnJvbSAnQC9hcHAvbGliL3NjaGVtYXMnO1xyXG5pbXBvcnQgeyBlbnJpY2hIb2xkaW5ncywgZ3JvdXBCeVNlY3RvciwgY29tcHV0ZVNlY3RvclRvdGFscywgY29tcHV0ZVBvcnRmb2xpb1RvdGFscyB9IGZyb20gJ0AvYXBwL2xpYi9jYWxjJztcclxuaW1wb3J0IHsgcmF0ZUxpbWl0ZWRSZXF1ZXN0IH0gZnJvbSAnQC9hcHAvbGliL2xpbWl0cyc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBsZXQgaG9sZGluZ3M6IGFueVtdID0gW107XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShib2R5KSkge1xyXG4gICAgICAgIGhvbGRpbmdzID0gYm9keTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIGNvbnN0IHNlZWREYXRhID0gYXdhaXQgaW1wb3J0KCdAL2RhdGEvaG9sZGluZ3MuanNvbicpO1xyXG4gICAgICBob2xkaW5ncyA9IHNlZWREYXRhLmRlZmF1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdmFsaWRhdGVkSG9sZGluZ3MgPSBob2xkaW5ncy5tYXAoKGhvbGRpbmcsIGluZGV4KSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIEhvbGRpbmdJbnB1dFNjaGVtYS5wYXJzZShob2xkaW5nKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaG9sZGluZyBhdCBpbmRleCAke2luZGV4fTogJHtlcnJvcn1gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgZW5yaWNoZWRIb2xkaW5ncyA9IGVucmljaEhvbGRpbmdzKHZhbGlkYXRlZEhvbGRpbmdzKTtcclxuXHJcbiAgICBjb25zdCBlbnJpY2hlZFdpdGhMaXZlRGF0YSA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICBlbnJpY2hlZEhvbGRpbmdzLm1hcChhc3luYyAoaG9sZGluZykgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBbcXVvdGVSZXNwb25zZSwgbWV0cmljc1Jlc3BvbnNlXSA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChbXHJcbiAgICAgICAgICAgIHJhdGVMaW1pdGVkUmVxdWVzdChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgICAgICAgICAgICAgIGAke3JlcXVlc3QubmV4dFVybC5vcmlnaW59L2FwaS9xdW90ZT9zeW1ib2w9JHtob2xkaW5nLnN5bWJvbH0mZXhjaGFuZ2U9JHtob2xkaW5nLmV4Y2hhbmdlfWBcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihgUXVvdGUgQVBJIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICByYXRlTGltaXRlZFJlcXVlc3QoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgICAgICAgICAgICBgJHtyZXF1ZXN0Lm5leHRVcmwub3JpZ2lufS9hcGkvbWV0cmljcz9zeW1ib2w9JHtob2xkaW5nLnN5bWJvbH0mZXhjaGFuZ2U9JHtob2xkaW5nLmV4Y2hhbmdlfWBcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihgTWV0cmljcyBBUEkgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICBsZXQgY21wOiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgICBsZXQgc3RhbGUgPSBmYWxzZTtcclxuICAgICAgICAgIGlmIChxdW90ZVJlc3BvbnNlLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcpIHtcclxuICAgICAgICAgICAgY21wID0gcXVvdGVSZXNwb25zZS52YWx1ZS5jbXA7XHJcbiAgICAgICAgICAgIHN0YWxlID0gcXVvdGVSZXNwb25zZS52YWx1ZS5mcm9tQ2FjaGUgfHwgZmFsc2U7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbGV0IHBlUmF0aW86IG51bWJlciB8IHVuZGVmaW5lZDtcclxuICAgICAgICAgIGxldCBsYXRlc3RFYXJuaW5nczogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgaWYgKG1ldHJpY3NSZXNwb25zZS5zdGF0dXMgPT09ICdmdWxmaWxsZWQnKSB7XHJcbiAgICAgICAgICAgIHBlUmF0aW8gPSBtZXRyaWNzUmVzcG9uc2UudmFsdWUucGVSYXRpbztcclxuICAgICAgICAgICAgbGF0ZXN0RWFybmluZ3MgPSBtZXRyaWNzUmVzcG9uc2UudmFsdWUubGF0ZXN0RWFybmluZ3M7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29uc3QgcHJlc2VudFZhbHVlID0gY21wID8gY21wICogaG9sZGluZy5xdHkgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICBjb25zdCBnYWluTG9zcyA9IHByZXNlbnRWYWx1ZSA/IHByZXNlbnRWYWx1ZSAtIGhvbGRpbmcuaW52ZXN0bWVudCA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAuLi5ob2xkaW5nLFxyXG4gICAgICAgICAgICBjbXAsXHJcbiAgICAgICAgICAgIHByZXNlbnRWYWx1ZSxcclxuICAgICAgICAgICAgZ2Fpbkxvc3MsXHJcbiAgICAgICAgICAgIHBlUmF0aW8sXHJcbiAgICAgICAgICAgIGxhdGVzdEVhcm5pbmdzLFxyXG4gICAgICAgICAgICBzdGFsZSxcclxuICAgICAgICAgIH0gYXMgSG9sZGluZ0VucmljaGVkO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBkYXRhIGZvciAke2hvbGRpbmcuc3ltYm9sfTpgLCBlcnJvcik7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAuLi5ob2xkaW5nLFxyXG4gICAgICAgICAgICBjbXA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgcHJlc2VudFZhbHVlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGdhaW5Mb3NzOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHBlUmF0aW86IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgbGF0ZXN0RWFybmluZ3M6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgc3RhbGU6IGZhbHNlLFxyXG4gICAgICAgICAgfSBhcyBIb2xkaW5nRW5yaWNoZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBzZWN0b3JHcm91cHMgPSBncm91cEJ5U2VjdG9yKGVucmljaGVkV2l0aExpdmVEYXRhKTtcclxuXHJcbiAgICBjb25zdCBzZWN0b3JzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XHJcbiAgICBmb3IgKGNvbnN0IFtzZWN0b3JOYW1lLCBzZWN0b3JIb2xkaW5nc10gb2YgT2JqZWN0LmVudHJpZXMoc2VjdG9yR3JvdXBzKSkge1xyXG4gICAgICBjb25zdCB0b3RhbHMgPSBjb21wdXRlU2VjdG9yVG90YWxzKHNlY3RvckhvbGRpbmdzKTtcclxuICAgICAgc2VjdG9yc1tzZWN0b3JOYW1lXSA9IHtcclxuICAgICAgICBob2xkaW5nczogc2VjdG9ySG9sZGluZ3MsXHJcbiAgICAgICAgLi4udG90YWxzLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRvdGFscyA9IGNvbXB1dGVQb3J0Zm9saW9Ub3RhbHMoZW5yaWNoZWRXaXRoTGl2ZURhdGEpO1xyXG5cclxuICAgIGNvbnN0IGhvbGRpbmdzV2l0aFBlcmNlbnRhZ2VzID0gZW5yaWNoZWRXaXRoTGl2ZURhdGEubWFwKGhvbGRpbmcgPT4gKHtcclxuICAgICAgLi4uaG9sZGluZyxcclxuICAgICAgcG9ydGZvbGlvUGVyY2VudDogdG90YWxzLnRvdGFsSW52ZXN0bWVudCA+IDAgXHJcbiAgICAgICAgPyAoaG9sZGluZy5pbnZlc3RtZW50IC8gdG90YWxzLnRvdGFsSW52ZXN0bWVudCkgKiAxMDAgXHJcbiAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICB9KSk7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2U6IFBvcnRmb2xpb1Jlc3BvbnNlID0ge1xyXG4gICAgICBob2xkaW5nczogaG9sZGluZ3NXaXRoUGVyY2VudGFnZXMsXHJcbiAgICAgIHRvdGFscyxcclxuICAgICAgc2VjdG9ycyxcclxuICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignUG9ydGZvbGlvIEFQSSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgXHJcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gcHJvY2VzcyBwb3J0Zm9saW8gZGF0YScsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlZWREYXRhID0gYXdhaXQgaW1wb3J0KCdAL2RhdGEvaG9sZGluZ3MuanNvbicpO1xyXG4gICAgY29uc3QgaG9sZGluZ3MgPSBzZWVkRGF0YS5kZWZhdWx0O1xyXG5cclxuICAgIGNvbnN0IHZhbGlkYXRlZEhvbGRpbmdzID0gaG9sZGluZ3MubWFwKChob2xkaW5nLCBpbmRleCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBIb2xkaW5nSW5wdXRTY2hlbWEucGFyc2UoaG9sZGluZyk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGhvbGRpbmcgYXQgaW5kZXggJHtpbmRleH06ICR7ZXJyb3J9YCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGVucmljaGVkSG9sZGluZ3MgPSBlbnJpY2hIb2xkaW5ncyh2YWxpZGF0ZWRIb2xkaW5ncyk7XHJcblxyXG4gICAgY29uc3Qgc2VjdG9yR3JvdXBzID0gZ3JvdXBCeVNlY3RvcihlbnJpY2hlZEhvbGRpbmdzKTtcclxuXHJcbiAgICBjb25zdCBzZWN0b3JzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XHJcbiAgICBmb3IgKGNvbnN0IFtzZWN0b3JOYW1lLCBzZWN0b3JIb2xkaW5nc10gb2YgT2JqZWN0LmVudHJpZXMoc2VjdG9yR3JvdXBzKSkge1xyXG4gICAgICBjb25zdCB0b3RhbHMgPSBjb21wdXRlU2VjdG9yVG90YWxzKHNlY3RvckhvbGRpbmdzKTtcclxuICAgICAgc2VjdG9yc1tzZWN0b3JOYW1lXSA9IHtcclxuICAgICAgICBob2xkaW5nczogc2VjdG9ySG9sZGluZ3MsXHJcbiAgICAgICAgLi4udG90YWxzLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRvdGFscyA9IGNvbXB1dGVQb3J0Zm9saW9Ub3RhbHMoZW5yaWNoZWRIb2xkaW5ncyk7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2U6IFBvcnRmb2xpb1Jlc3BvbnNlID0ge1xyXG4gICAgICBob2xkaW5nczogZW5yaWNoZWRIb2xkaW5ncyxcclxuICAgICAgdG90YWxzLFxyXG4gICAgICBzZWN0b3JzLFxyXG4gICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdQb3J0Zm9saW8gR0VUIEFQSSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgXHJcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gcHJvY2VzcyBwb3J0Zm9saW8gZGF0YScsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIkhvbGRpbmdJbnB1dFNjaGVtYSIsImVucmljaEhvbGRpbmdzIiwiZ3JvdXBCeVNlY3RvciIsImNvbXB1dGVTZWN0b3JUb3RhbHMiLCJjb21wdXRlUG9ydGZvbGlvVG90YWxzIiwicmF0ZUxpbWl0ZWRSZXF1ZXN0IiwiUE9TVCIsInJlcXVlc3QiLCJob2xkaW5ncyIsImJvZHkiLCJqc29uIiwiQXJyYXkiLCJpc0FycmF5Iiwic2VlZERhdGEiLCJkZWZhdWx0IiwidmFsaWRhdGVkSG9sZGluZ3MiLCJtYXAiLCJob2xkaW5nIiwiaW5kZXgiLCJwYXJzZSIsImVycm9yIiwiRXJyb3IiLCJlbnJpY2hlZEhvbGRpbmdzIiwiZW5yaWNoZWRXaXRoTGl2ZURhdGEiLCJQcm9taXNlIiwiYWxsIiwicXVvdGVSZXNwb25zZSIsIm1ldHJpY3NSZXNwb25zZSIsImFsbFNldHRsZWQiLCJyZXNwb25zZSIsImZldGNoIiwibmV4dFVybCIsIm9yaWdpbiIsInN5bWJvbCIsImV4Y2hhbmdlIiwib2siLCJzdGF0dXNUZXh0IiwiY21wIiwic3RhbGUiLCJzdGF0dXMiLCJ2YWx1ZSIsImZyb21DYWNoZSIsInBlUmF0aW8iLCJsYXRlc3RFYXJuaW5ncyIsInByZXNlbnRWYWx1ZSIsInF0eSIsInVuZGVmaW5lZCIsImdhaW5Mb3NzIiwiaW52ZXN0bWVudCIsImNvbnNvbGUiLCJzZWN0b3JHcm91cHMiLCJzZWN0b3JzIiwic2VjdG9yTmFtZSIsInNlY3RvckhvbGRpbmdzIiwiT2JqZWN0IiwiZW50cmllcyIsInRvdGFscyIsImhvbGRpbmdzV2l0aFBlcmNlbnRhZ2VzIiwicG9ydGZvbGlvUGVyY2VudCIsInRvdGFsSW52ZXN0bWVudCIsImxhc3RVcGRhdGVkIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZGV0YWlscyIsIm1lc3NhZ2UiLCJHRVQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/portfolio/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/calc.ts":
/*!*************************!*\
  !*** ./app/lib/calc.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   computeGainLoss: () => (/* binding */ computeGainLoss),\n/* harmony export */   computeGainLossPercent: () => (/* binding */ computeGainLossPercent),\n/* harmony export */   computeInvestment: () => (/* binding */ computeInvestment),\n/* harmony export */   computePortfolioPercent: () => (/* binding */ computePortfolioPercent),\n/* harmony export */   computePortfolioTotals: () => (/* binding */ computePortfolioTotals),\n/* harmony export */   computePresentValue: () => (/* binding */ computePresentValue),\n/* harmony export */   computeSectorTotals: () => (/* binding */ computeSectorTotals),\n/* harmony export */   enrichHoldings: () => (/* binding */ enrichHoldings),\n/* harmony export */   formatCurrency: () => (/* binding */ formatCurrency),\n/* harmony export */   formatPercentage: () => (/* binding */ formatPercentage),\n/* harmony export */   getGainLossBgColor: () => (/* binding */ getGainLossBgColor),\n/* harmony export */   getGainLossColor: () => (/* binding */ getGainLossColor),\n/* harmony export */   groupBySector: () => (/* binding */ groupBySector)\n/* harmony export */ });\nfunction computeInvestment(holding) {\n    return holding.purchasePrice * holding.qty;\n}\nfunction computePresentValue(holding) {\n    if (!holding.cmp) return undefined;\n    return holding.cmp * holding.qty;\n}\nfunction computeGainLoss(holding) {\n    const presentValue = computePresentValue(holding);\n    if (presentValue === undefined) return undefined;\n    return presentValue - holding.investment;\n}\nfunction computeGainLossPercent(holding) {\n    const gainLoss = computeGainLoss(holding);\n    if (gainLoss === undefined || holding.investment === 0) return undefined;\n    return gainLoss / holding.investment * 100;\n}\nfunction computePortfolioPercent(holding, totalInvestment) {\n    if (totalInvestment === 0) return undefined;\n    return holding.investment / totalInvestment * 100;\n}\nfunction groupBySector(holdings) {\n    return holdings.reduce((groups, holding)=>{\n        const sector = holding.sector;\n        if (!groups[sector]) {\n            groups[sector] = [];\n        }\n        groups[sector].push(holding);\n        return groups;\n    }, {});\n}\nfunction computeSectorTotals(sectorHoldings) {\n    const investment = sectorHoldings.reduce((sum, holding)=>sum + holding.investment, 0);\n    const presentValues = sectorHoldings.map((holding)=>computePresentValue(holding)).filter((value)=>value !== undefined);\n    const presentValue = presentValues.length > 0 ? presentValues.reduce((sum, value)=>sum + value, 0) : undefined;\n    const gainLoss = presentValue !== undefined ? presentValue - investment : undefined;\n    const gainLossPercent = gainLoss !== undefined && investment > 0 ? gainLoss / investment * 100 : undefined;\n    return {\n        investment,\n        presentValue,\n        gainLoss,\n        gainLossPercent\n    };\n}\nfunction computePortfolioTotals(holdings) {\n    const totalInvestment = holdings.reduce((sum, holding)=>sum + holding.investment, 0);\n    const presentValues = holdings.map((holding)=>computePresentValue(holding)).filter((value)=>value !== undefined);\n    const totalPresentValue = presentValues.length > 0 ? presentValues.reduce((sum, value)=>sum + value, 0) : undefined;\n    const totalGainLoss = totalPresentValue !== undefined ? totalPresentValue - totalInvestment : undefined;\n    const totalGainLossPercent = totalGainLoss !== undefined && totalInvestment > 0 ? totalGainLoss / totalInvestment * 100 : undefined;\n    return {\n        totalInvestment,\n        totalPresentValue,\n        totalGainLoss,\n        totalGainLossPercent\n    };\n}\nfunction enrichHoldings(holdings) {\n    return holdings.map((holding)=>({\n            ...holding,\n            investment: computeInvestment(holding)\n        }));\n}\nfunction formatCurrency(value, currency = \"INR\") {\n    return new Intl.NumberFormat(\"en-IN\", {\n        style: \"currency\",\n        currency,\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 2\n    }).format(value);\n}\nfunction formatPercentage(value, decimals = 2) {\n    return `${value.toFixed(decimals)}%`;\n}\nfunction getGainLossColor(value) {\n    if (value === undefined || value === 0) return \"text-gray-600\";\n    return value > 0 ? \"text-green-600\" : \"text-red-600\";\n}\nfunction getGainLossBgColor(value) {\n    if (value === undefined || value === 0) return \"bg-gray-100\";\n    return value > 0 ? \"bg-green-50\" : \"bg-red-50\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjtJQUNyRCxPQUFPQSxTQUFTUyxHQUFHLENBQUN2QixDQUFBQSxVQUFZO1lBQzlCLEdBQUdBLE9BQU87WUFDVlEsWUFBWVQsa0JBQWtCQztRQUNoQztBQUNGO0FBRU8sU0FBU2lDLGVBQWVSLEtBQWEsRUFBRVMsV0FBbUIsS0FBSztJQUNwRSxPQUFPLElBQUlDLEtBQUtDLFlBQVksQ0FBQyxTQUFTO1FBQ3BDQyxPQUFPO1FBQ1BIO1FBQ0FJLHVCQUF1QjtRQUN2QkMsdUJBQXVCO0lBQ3pCLEdBQUdDLE1BQU0sQ0FBQ2Y7QUFDWjtBQUVPLFNBQVNnQixpQkFBaUJoQixLQUFhLEVBQUVpQixXQUFtQixDQUFDO0lBQ2xFLE9BQU8sQ0FBQyxFQUFFakIsTUFBTWtCLE9BQU8sQ0FBQ0QsVUFBVSxDQUFDLENBQUM7QUFDdEM7QUFFTyxTQUFTRSxpQkFBaUJuQixLQUF5QjtJQUN4RCxJQUFJQSxVQUFVcEIsYUFBYW9CLFVBQVUsR0FBRyxPQUFPO0lBQy9DLE9BQU9BLFFBQVEsSUFBSSxtQkFBbUI7QUFDeEM7QUFFTyxTQUFTb0IsbUJBQW1CcEIsS0FBeUI7SUFDMUQsSUFBSUEsVUFBVXBCLGFBQWFvQixVQUFVLEdBQUcsT0FBTztJQUMvQyxPQUFPQSxRQUFRLElBQUksZ0JBQWdCO0FBQ3JDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9ydGZvbGlvLWRhc2hib2FyZC8uL2FwcC9saWIvY2FsYy50cz8zZWNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhvbGRpbmdJbnB1dCwgSG9sZGluZ0VucmljaGVkIH0gZnJvbSAnLi9zY2hlbWFzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlSW52ZXN0bWVudChob2xkaW5nOiBIb2xkaW5nSW5wdXQpOiBudW1iZXIge1xyXG4gIHJldHVybiBob2xkaW5nLnB1cmNoYXNlUHJpY2UgKiBob2xkaW5nLnF0eTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVQcmVzZW50VmFsdWUoaG9sZGluZzogSG9sZGluZ0VucmljaGVkKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcclxuICBpZiAoIWhvbGRpbmcuY21wKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIHJldHVybiBob2xkaW5nLmNtcCAqIGhvbGRpbmcucXR5O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZUdhaW5Mb3NzKGhvbGRpbmc6IEhvbGRpbmdFbnJpY2hlZCk6IG51bWJlciB8IHVuZGVmaW5lZCB7XHJcbiAgY29uc3QgcHJlc2VudFZhbHVlID0gY29tcHV0ZVByZXNlbnRWYWx1ZShob2xkaW5nKTtcclxuICBpZiAocHJlc2VudFZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgcmV0dXJuIHByZXNlbnRWYWx1ZSAtIGhvbGRpbmcuaW52ZXN0bWVudDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVHYWluTG9zc1BlcmNlbnQoaG9sZGluZzogSG9sZGluZ0VucmljaGVkKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcclxuICBjb25zdCBnYWluTG9zcyA9IGNvbXB1dGVHYWluTG9zcyhob2xkaW5nKTtcclxuICBpZiAoZ2Fpbkxvc3MgPT09IHVuZGVmaW5lZCB8fCBob2xkaW5nLmludmVzdG1lbnQgPT09IDApIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgcmV0dXJuIChnYWluTG9zcyAvIGhvbGRpbmcuaW52ZXN0bWVudCkgKiAxMDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlUG9ydGZvbGlvUGVyY2VudChcclxuICBob2xkaW5nOiBIb2xkaW5nRW5yaWNoZWQsXHJcbiAgdG90YWxJbnZlc3RtZW50OiBudW1iZXJcclxuKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcclxuICBpZiAodG90YWxJbnZlc3RtZW50ID09PSAwKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIHJldHVybiAoaG9sZGluZy5pbnZlc3RtZW50IC8gdG90YWxJbnZlc3RtZW50KSAqIDEwMDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwQnlTZWN0b3IoaG9sZGluZ3M6IEhvbGRpbmdFbnJpY2hlZFtdKTogUmVjb3JkPHN0cmluZywgSG9sZGluZ0VucmljaGVkW10+IHtcclxuICByZXR1cm4gaG9sZGluZ3MucmVkdWNlKChncm91cHMsIGhvbGRpbmcpID0+IHtcclxuICAgIGNvbnN0IHNlY3RvciA9IGhvbGRpbmcuc2VjdG9yO1xyXG4gICAgaWYgKCFncm91cHNbc2VjdG9yXSkge1xyXG4gICAgICBncm91cHNbc2VjdG9yXSA9IFtdO1xyXG4gICAgfVxyXG4gICAgZ3JvdXBzW3NlY3Rvcl0ucHVzaChob2xkaW5nKTtcclxuICAgIHJldHVybiBncm91cHM7XHJcbiAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgSG9sZGluZ0VucmljaGVkW10+KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVTZWN0b3JUb3RhbHMoc2VjdG9ySG9sZGluZ3M6IEhvbGRpbmdFbnJpY2hlZFtdKToge1xyXG4gIGludmVzdG1lbnQ6IG51bWJlcjtcclxuICBwcmVzZW50VmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuICBnYWluTG9zczogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG4gIGdhaW5Mb3NzUGVyY2VudDogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG59IHtcclxuICBjb25zdCBpbnZlc3RtZW50ID0gc2VjdG9ySG9sZGluZ3MucmVkdWNlKChzdW0sIGhvbGRpbmcpID0+IHN1bSArIGhvbGRpbmcuaW52ZXN0bWVudCwgMCk7XHJcbiAgY29uc3QgcHJlc2VudFZhbHVlcyA9IHNlY3RvckhvbGRpbmdzXHJcbiAgICAubWFwKGhvbGRpbmcgPT4gY29tcHV0ZVByZXNlbnRWYWx1ZShob2xkaW5nKSlcclxuICAgIC5maWx0ZXIoKHZhbHVlKTogdmFsdWUgaXMgbnVtYmVyID0+IHZhbHVlICE9PSB1bmRlZmluZWQpO1xyXG4gIGNvbnN0IHByZXNlbnRWYWx1ZSA9IHByZXNlbnRWYWx1ZXMubGVuZ3RoID4gMCBcclxuICAgID8gcHJlc2VudFZhbHVlcy5yZWR1Y2UoKHN1bSwgdmFsdWUpID0+IHN1bSArIHZhbHVlLCAwKVxyXG4gICAgOiB1bmRlZmluZWQ7XHJcbiAgY29uc3QgZ2Fpbkxvc3MgPSBwcmVzZW50VmFsdWUgIT09IHVuZGVmaW5lZCA/IHByZXNlbnRWYWx1ZSAtIGludmVzdG1lbnQgOiB1bmRlZmluZWQ7XHJcbiAgY29uc3QgZ2Fpbkxvc3NQZXJjZW50ID0gZ2Fpbkxvc3MgIT09IHVuZGVmaW5lZCAmJiBpbnZlc3RtZW50ID4gMCBcclxuICAgID8gKGdhaW5Mb3NzIC8gaW52ZXN0bWVudCkgKiAxMDAgXHJcbiAgICA6IHVuZGVmaW5lZDtcclxuICByZXR1cm4ge1xyXG4gICAgaW52ZXN0bWVudCxcclxuICAgIHByZXNlbnRWYWx1ZSxcclxuICAgIGdhaW5Mb3NzLFxyXG4gICAgZ2Fpbkxvc3NQZXJjZW50LFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlUG9ydGZvbGlvVG90YWxzKGhvbGRpbmdzOiBIb2xkaW5nRW5yaWNoZWRbXSk6IHtcclxuICB0b3RhbEludmVzdG1lbnQ6IG51bWJlcjtcclxuICB0b3RhbFByZXNlbnRWYWx1ZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG4gIHRvdGFsR2Fpbkxvc3M6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuICB0b3RhbEdhaW5Mb3NzUGVyY2VudDogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG59IHtcclxuICBjb25zdCB0b3RhbEludmVzdG1lbnQgPSBob2xkaW5ncy5yZWR1Y2UoKHN1bSwgaG9sZGluZykgPT4gc3VtICsgaG9sZGluZy5pbnZlc3RtZW50LCAwKTtcclxuICBjb25zdCBwcmVzZW50VmFsdWVzID0gaG9sZGluZ3NcclxuICAgIC5tYXAoaG9sZGluZyA9PiBjb21wdXRlUHJlc2VudFZhbHVlKGhvbGRpbmcpKVxyXG4gICAgLmZpbHRlcigodmFsdWUpOiB2YWx1ZSBpcyBudW1iZXIgPT4gdmFsdWUgIT09IHVuZGVmaW5lZCk7XHJcbiAgY29uc3QgdG90YWxQcmVzZW50VmFsdWUgPSBwcmVzZW50VmFsdWVzLmxlbmd0aCA+IDAgXHJcbiAgICA/IHByZXNlbnRWYWx1ZXMucmVkdWNlKChzdW0sIHZhbHVlKSA9PiBzdW0gKyB2YWx1ZSwgMClcclxuICAgIDogdW5kZWZpbmVkO1xyXG4gIGNvbnN0IHRvdGFsR2Fpbkxvc3MgPSB0b3RhbFByZXNlbnRWYWx1ZSAhPT0gdW5kZWZpbmVkIFxyXG4gICAgPyB0b3RhbFByZXNlbnRWYWx1ZSAtIHRvdGFsSW52ZXN0bWVudCBcclxuICAgIDogdW5kZWZpbmVkO1xyXG4gIGNvbnN0IHRvdGFsR2Fpbkxvc3NQZXJjZW50ID0gdG90YWxHYWluTG9zcyAhPT0gdW5kZWZpbmVkICYmIHRvdGFsSW52ZXN0bWVudCA+IDAgXHJcbiAgICA/ICh0b3RhbEdhaW5Mb3NzIC8gdG90YWxJbnZlc3RtZW50KSAqIDEwMCBcclxuICAgIDogdW5kZWZpbmVkO1xyXG4gIHJldHVybiB7XHJcbiAgICB0b3RhbEludmVzdG1lbnQsXHJcbiAgICB0b3RhbFByZXNlbnRWYWx1ZSxcclxuICAgIHRvdGFsR2Fpbkxvc3MsXHJcbiAgICB0b3RhbEdhaW5Mb3NzUGVyY2VudCxcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW5yaWNoSG9sZGluZ3MoaG9sZGluZ3M6IEhvbGRpbmdJbnB1dFtdKTogSG9sZGluZ0VucmljaGVkW10ge1xyXG4gIHJldHVybiBob2xkaW5ncy5tYXAoaG9sZGluZyA9PiAoe1xyXG4gICAgLi4uaG9sZGluZyxcclxuICAgIGludmVzdG1lbnQ6IGNvbXB1dGVJbnZlc3RtZW50KGhvbGRpbmcpLFxyXG4gIH0pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEN1cnJlbmN5KHZhbHVlOiBudW1iZXIsIGN1cnJlbmN5OiBzdHJpbmcgPSAnSU5SJyk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdCgnZW4tSU4nLCB7XHJcbiAgICBzdHlsZTogJ2N1cnJlbmN5JyxcclxuICAgIGN1cnJlbmN5LFxyXG4gICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAwLFxyXG4gICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAyLFxyXG4gIH0pLmZvcm1hdCh2YWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRQZXJjZW50YWdlKHZhbHVlOiBudW1iZXIsIGRlY2ltYWxzOiBudW1iZXIgPSAyKTogc3RyaW5nIHtcclxuICByZXR1cm4gYCR7dmFsdWUudG9GaXhlZChkZWNpbWFscyl9JWA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRHYWluTG9zc0NvbG9yKHZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xyXG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSAwKSByZXR1cm4gJ3RleHQtZ3JheS02MDAnO1xyXG4gIHJldHVybiB2YWx1ZSA+IDAgPyAndGV4dC1ncmVlbi02MDAnIDogJ3RleHQtcmVkLTYwMCc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRHYWluTG9zc0JnQ29sb3IodmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZCk6IHN0cmluZyB7XHJcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IDApIHJldHVybiAnYmctZ3JheS0xMDAnO1xyXG4gIHJldHVybiB2YWx1ZSA+IDAgPyAnYmctZ3JlZW4tNTAnIDogJ2JnLXJlZC01MCc7XHJcbn1cclxuIl0sIm5hbWVzIjpbImNvbXB1dGVJbnZlc3RtZW50IiwiaG9sZGluZyIsInB1cmNoYXNlUHJpY2UiLCJxdHkiLCJjb21wdXRlUHJlc2VudFZhbHVlIiwiY21wIiwidW5kZWZpbmVkIiwiY29tcHV0ZUdhaW5Mb3NzIiwicHJlc2VudFZhbHVlIiwiaW52ZXN0bWVudCIsImNvbXB1dGVHYWluTG9zc1BlcmNlbnQiLCJnYWluTG9zcyIsImNvbXB1dGVQb3J0Zm9saW9QZXJjZW50IiwidG90YWxJbnZlc3RtZW50IiwiZ3JvdXBCeVNlY3RvciIsImhvbGRpbmdzIiwicmVkdWNlIiwiZ3JvdXBzIiwic2VjdG9yIiwicHVzaCIsImNvbXB1dGVTZWN0b3JUb3RhbHMiLCJzZWN0b3JIb2xkaW5ncyIsInN1bSIsInByZXNlbnRWYWx1ZXMiLCJtYXAiLCJmaWx0ZXIiLCJ2YWx1ZSIsImxlbmd0aCIsImdhaW5Mb3NzUGVyY2VudCIsImNvbXB1dGVQb3J0Zm9saW9Ub3RhbHMiLCJ0b3RhbFByZXNlbnRWYWx1ZSIsInRvdGFsR2Fpbkxvc3MiLCJ0b3RhbEdhaW5Mb3NzUGVyY2VudCIsImVucmljaEhvbGRpbmdzIiwiZm9ybWF0Q3VycmVuY3kiLCJjdXJyZW5jeSIsIkludGwiLCJOdW1iZXJGb3JtYXQiLCJzdHlsZSIsIm1pbmltdW1GcmFjdGlvbkRpZ2l0cyIsIm1heGltdW1GcmFjdGlvbkRpZ2l0cyIsImZvcm1hdCIsImZvcm1hdFBlcmNlbnRhZ2UiLCJkZWNpbWFscyIsInRvRml4ZWQiLCJnZXRHYWluTG9zc0NvbG9yIiwiZ2V0R2Fpbkxvc3NCZ0NvbG9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/calc.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/limits.ts":
/*!***************************!*\
  !*** ./app/lib/limits.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateBackoffDelay: () => (/* binding */ calculateBackoffDelay),\n/* harmony export */   limit: () => (/* binding */ limit),\n/* harmony export */   rateLimitedRequest: () => (/* binding */ rateLimitedRequest),\n/* harmony export */   respectfulDelay: () => (/* binding */ respectfulDelay),\n/* harmony export */   retryWithBackoff: () => (/* binding */ retryWithBackoff)\n/* harmony export */ });\nclass ConcurrencyLimiter {\n    constructor(maxConcurrency){\n        this.running = 0;\n        this.queue = [];\n        this.maxConcurrency = maxConcurrency;\n    }\n    async run(fn) {\n        if (this.running >= this.maxConcurrency) {\n            await new Promise((resolve)=>{\n                this.queue.push(async ()=>{\n                    try {\n                        return await fn();\n                    } finally{\n                        resolve();\n                    }\n                });\n            });\n        }\n        this.running++;\n        try {\n            const result = await fn();\n            return result;\n        } finally{\n            this.running--;\n            if (this.queue.length > 0) {\n                const next = this.queue.shift();\n                if (next) {\n                    next();\n                }\n            }\n        }\n    }\n}\nconst limit = new ConcurrencyLimiter(5);\nfunction calculateBackoffDelay(attempt, baseDelay = 250, maxDelay = 5000) {\n    const delay = Math.min(baseDelay * Math.pow(2, attempt), maxDelay);\n    const jitter = Math.random() * 0.1 * delay;\n    return delay + jitter;\n}\nasync function retryWithBackoff(fn, maxAttempts = 3, baseDelay = 250) {\n    let lastError;\n    for(let attempt = 0; attempt < maxAttempts; attempt++){\n        try {\n            return await fn();\n        } catch (error) {\n            lastError = error;\n            if (attempt === maxAttempts - 1) {\n                throw lastError;\n            }\n            const delay = calculateBackoffDelay(attempt, baseDelay);\n            await new Promise((resolve)=>setTimeout(resolve, delay));\n        }\n    }\n    throw lastError;\n}\nasync function rateLimitedRequest(fn, maxAttempts = 3) {\n    return limit.run(()=>retryWithBackoff(fn, maxAttempts));\n}\nasync function respectfulDelay(minDelay = 200, maxDelay = 400) {\n    const delay = Math.random() * (maxDelay - minDelay) + minDelay;\n    await new Promise((resolve)=>setTimeout(resolve, delay));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvbGliL2xpbWl0cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLE1BQU1BO0lBS0pDLFlBQVlDLGNBQXNCLENBQUU7YUFKNUJDLFVBQVU7YUFDVkMsUUFBbUMsRUFBRTtRQUkzQyxJQUFJLENBQUNGLGNBQWMsR0FBR0E7SUFDeEI7SUFFQSxNQUFNRyxJQUFPQyxFQUFvQixFQUFjO1FBQzdDLElBQUksSUFBSSxDQUFDSCxPQUFPLElBQUksSUFBSSxDQUFDRCxjQUFjLEVBQUU7WUFDdkMsTUFBTSxJQUFJSyxRQUFjLENBQUNDO2dCQUN2QixJQUFJLENBQUNKLEtBQUssQ0FBQ0ssSUFBSSxDQUFDO29CQUNkLElBQUk7d0JBQ0YsT0FBTyxNQUFNSDtvQkFDZixTQUFVO3dCQUNSRTtvQkFDRjtnQkFDRjtZQUNGO1FBQ0Y7UUFFQSxJQUFJLENBQUNMLE9BQU87UUFDWixJQUFJO1lBQ0YsTUFBTU8sU0FBUyxNQUFNSjtZQUNyQixPQUFPSTtRQUNULFNBQVU7WUFDUixJQUFJLENBQUNQLE9BQU87WUFDWixJQUFJLElBQUksQ0FBQ0MsS0FBSyxDQUFDTyxNQUFNLEdBQUcsR0FBRztnQkFDekIsTUFBTUMsT0FBTyxJQUFJLENBQUNSLEtBQUssQ0FBQ1MsS0FBSztnQkFDN0IsSUFBSUQsTUFBTTtvQkFDUkE7Z0JBQ0Y7WUFDRjtRQUNGO0lBQ0Y7QUFDRjtBQUVPLE1BQU1FLFFBQVEsSUFBSWQsbUJBQW1CLEdBQUc7QUFFeEMsU0FBU2Usc0JBQ2RDLE9BQWUsRUFDZkMsWUFBb0IsR0FBRyxFQUN2QkMsV0FBbUIsSUFBSTtJQUV2QixNQUFNQyxRQUFRQyxLQUFLQyxHQUFHLENBQUNKLFlBQVlHLEtBQUtFLEdBQUcsQ0FBQyxHQUFHTixVQUFVRTtJQUN6RCxNQUFNSyxTQUFTSCxLQUFLSSxNQUFNLEtBQUssTUFBTUw7SUFDckMsT0FBT0EsUUFBUUk7QUFDakI7QUFFTyxlQUFlRSxpQkFDcEJuQixFQUFvQixFQUNwQm9CLGNBQXNCLENBQUMsRUFDdkJULFlBQW9CLEdBQUc7SUFFdkIsSUFBSVU7SUFFSixJQUFLLElBQUlYLFVBQVUsR0FBR0EsVUFBVVUsYUFBYVYsVUFBVztRQUN0RCxJQUFJO1lBQ0YsT0FBTyxNQUFNVjtRQUNmLEVBQUUsT0FBT3NCLE9BQU87WUFDZEQsWUFBWUM7WUFDWixJQUFJWixZQUFZVSxjQUFjLEdBQUc7Z0JBQy9CLE1BQU1DO1lBQ1I7WUFDQSxNQUFNUixRQUFRSixzQkFBc0JDLFNBQVNDO1lBQzdDLE1BQU0sSUFBSVYsUUFBUUMsQ0FBQUEsVUFBV3FCLFdBQVdyQixTQUFTVztRQUNuRDtJQUNGO0lBRUEsTUFBTVE7QUFDUjtBQUVPLGVBQWVHLG1CQUNwQnhCLEVBQW9CLEVBQ3BCb0IsY0FBc0IsQ0FBQztJQUV2QixPQUFPWixNQUFNVCxHQUFHLENBQUMsSUFBTW9CLGlCQUFpQm5CLElBQUlvQjtBQUM5QztBQUVPLGVBQWVLLGdCQUNwQkMsV0FBbUIsR0FBRyxFQUN0QmQsV0FBbUIsR0FBRztJQUV0QixNQUFNQyxRQUFRQyxLQUFLSSxNQUFNLEtBQU1OLENBQUFBLFdBQVdjLFFBQU8sSUFBS0E7SUFDdEQsTUFBTSxJQUFJekIsUUFBUUMsQ0FBQUEsVUFBV3FCLFdBQVdyQixTQUFTVztBQUNuRCIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby1kYXNoYm9hcmQvLi9hcHAvbGliL2xpbWl0cy50cz80OGVjIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENvbmN1cnJlbmN5TGltaXRlciB7XHJcbiAgcHJpdmF0ZSBydW5uaW5nID0gMDtcclxuICBwcml2YXRlIHF1ZXVlOiBBcnJheTwoKSA9PiBQcm9taXNlPGFueT4+ID0gW107XHJcbiAgcHJpdmF0ZSBtYXhDb25jdXJyZW5jeTogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3RvcihtYXhDb25jdXJyZW5jeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLm1heENvbmN1cnJlbmN5ID0gbWF4Q29uY3VycmVuY3k7XHJcbiAgfVxyXG5cclxuICBhc3luYyBydW48VD4oZm46ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFQ+IHtcclxuICAgIGlmICh0aGlzLnJ1bm5pbmcgPj0gdGhpcy5tYXhDb25jdXJyZW5jeSkge1xyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIHRoaXMucXVldWUucHVzaChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZm4oKTtcclxuICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5ydW5uaW5nKys7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbigpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgdGhpcy5ydW5uaW5nLS07XHJcbiAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5xdWV1ZS5zaGlmdCgpO1xyXG4gICAgICAgIGlmIChuZXh0KSB7XHJcbiAgICAgICAgICBuZXh0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbGltaXQgPSBuZXcgQ29uY3VycmVuY3lMaW1pdGVyKDUpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2tvZmZEZWxheShcclxuICBhdHRlbXB0OiBudW1iZXIsXHJcbiAgYmFzZURlbGF5OiBudW1iZXIgPSAyNTAsXHJcbiAgbWF4RGVsYXk6IG51bWJlciA9IDUwMDBcclxuKTogbnVtYmVyIHtcclxuICBjb25zdCBkZWxheSA9IE1hdGgubWluKGJhc2VEZWxheSAqIE1hdGgucG93KDIsIGF0dGVtcHQpLCBtYXhEZWxheSk7XHJcbiAgY29uc3Qgaml0dGVyID0gTWF0aC5yYW5kb20oKSAqIDAuMSAqIGRlbGF5O1xyXG4gIHJldHVybiBkZWxheSArIGppdHRlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJldHJ5V2l0aEJhY2tvZmY8VD4oXHJcbiAgZm46ICgpID0+IFByb21pc2U8VD4sXHJcbiAgbWF4QXR0ZW1wdHM6IG51bWJlciA9IDMsXHJcbiAgYmFzZURlbGF5OiBudW1iZXIgPSAyNTBcclxuKTogUHJvbWlzZTxUPiB7XHJcbiAgbGV0IGxhc3RFcnJvcjogRXJyb3I7XHJcblxyXG4gIGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDwgbWF4QXR0ZW1wdHM7IGF0dGVtcHQrKykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIGF3YWl0IGZuKCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsYXN0RXJyb3IgPSBlcnJvciBhcyBFcnJvcjtcclxuICAgICAgaWYgKGF0dGVtcHQgPT09IG1heEF0dGVtcHRzIC0gMSkge1xyXG4gICAgICAgIHRocm93IGxhc3RFcnJvcjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBkZWxheSA9IGNhbGN1bGF0ZUJhY2tvZmZEZWxheShhdHRlbXB0LCBiYXNlRGVsYXkpO1xyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRocm93IGxhc3RFcnJvciE7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByYXRlTGltaXRlZFJlcXVlc3Q8VD4oXHJcbiAgZm46ICgpID0+IFByb21pc2U8VD4sXHJcbiAgbWF4QXR0ZW1wdHM6IG51bWJlciA9IDNcclxuKTogUHJvbWlzZTxUPiB7XHJcbiAgcmV0dXJuIGxpbWl0LnJ1bigoKSA9PiByZXRyeVdpdGhCYWNrb2ZmKGZuLCBtYXhBdHRlbXB0cykpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzcGVjdGZ1bERlbGF5KFxyXG4gIG1pbkRlbGF5OiBudW1iZXIgPSAyMDAsXHJcbiAgbWF4RGVsYXk6IG51bWJlciA9IDQwMFxyXG4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICBjb25zdCBkZWxheSA9IE1hdGgucmFuZG9tKCkgKiAobWF4RGVsYXkgLSBtaW5EZWxheSkgKyBtaW5EZWxheTtcclxuICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkpKTtcclxufVxyXG4iXSwibmFtZXMiOlsiQ29uY3VycmVuY3lMaW1pdGVyIiwiY29uc3RydWN0b3IiLCJtYXhDb25jdXJyZW5jeSIsInJ1bm5pbmciLCJxdWV1ZSIsInJ1biIsImZuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJwdXNoIiwicmVzdWx0IiwibGVuZ3RoIiwibmV4dCIsInNoaWZ0IiwibGltaXQiLCJjYWxjdWxhdGVCYWNrb2ZmRGVsYXkiLCJhdHRlbXB0IiwiYmFzZURlbGF5IiwibWF4RGVsYXkiLCJkZWxheSIsIk1hdGgiLCJtaW4iLCJwb3ciLCJqaXR0ZXIiLCJyYW5kb20iLCJyZXRyeVdpdGhCYWNrb2ZmIiwibWF4QXR0ZW1wdHMiLCJsYXN0RXJyb3IiLCJlcnJvciIsInNldFRpbWVvdXQiLCJyYXRlTGltaXRlZFJlcXVlc3QiLCJyZXNwZWN0ZnVsRGVsYXkiLCJtaW5EZWxheSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/limits.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/schemas.ts":
/*!****************************!*\
  !*** ./app/lib/schemas.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HoldingEnrichedSchema: () => (/* binding */ HoldingEnrichedSchema),\n/* harmony export */   HoldingInputSchema: () => (/* binding */ HoldingInputSchema),\n/* harmony export */   MetricsResponseSchema: () => (/* binding */ MetricsResponseSchema),\n/* harmony export */   PortfolioResponseSchema: () => (/* binding */ PortfolioResponseSchema),\n/* harmony export */   QuoteResponseSchema: () => (/* binding */ QuoteResponseSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\nconst HoldingInputSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    symbol: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Symbol is required\"),\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Name is required\"),\n    sector: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Sector is required\"),\n    purchasePrice: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"Purchase price must be positive\"),\n    qty: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(\"Quantity must be positive\"),\n    exchange: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"NSE\",\n        \"BSE\"\n    ], {\n        errorMap: ()=>({\n                message: \"Exchange must be NSE or BSE\"\n            })\n    })\n});\nconst QuoteResponseSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    symbol: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    cmp: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive().optional(),\n    exchange: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    fromCache: zod__WEBPACK_IMPORTED_MODULE_0__.boolean(),\n    asOf: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime(),\n    error: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nconst MetricsResponseSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    symbol: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    peRatio: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive().optional(),\n    latestEarnings: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    fromCache: zod__WEBPACK_IMPORTED_MODULE_0__.boolean(),\n    asOf: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime(),\n    error: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nconst HoldingEnrichedSchema = HoldingInputSchema.extend({\n    investment: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive(),\n    cmp: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive().optional(),\n    presentValue: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive().optional(),\n    gainLoss: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    peRatio: zod__WEBPACK_IMPORTED_MODULE_0__.number().positive().optional(),\n    latestEarnings: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    stale: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n    portfolioPercent: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional()\n});\nconst PortfolioResponseSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    holdings: zod__WEBPACK_IMPORTED_MODULE_0__.array(HoldingEnrichedSchema),\n    totals: zod__WEBPACK_IMPORTED_MODULE_0__.object({\n        totalInvestment: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n        totalPresentValue: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n        totalGainLoss: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n        totalGainLossPercent: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional()\n    }),\n    sectors: zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.object({\n        holdings: zod__WEBPACK_IMPORTED_MODULE_0__.array(HoldingEnrichedSchema),\n        investment: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n        presentValue: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n        gainLoss: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n        gainLossPercent: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional()\n    })),\n    lastUpdated: zod__WEBPACK_IMPORTED_MODULE_0__.string().datetime()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvbGliL3NjaGVtYXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdCO0FBRWpCLE1BQU1DLHFCQUFxQkQsdUNBQVEsQ0FBQztJQUN6Q0csUUFBUUgsdUNBQVEsR0FBR0ssR0FBRyxDQUFDLEdBQUc7SUFDMUJDLE1BQU1OLHVDQUFRLEdBQUdLLEdBQUcsQ0FBQyxHQUFHO0lBQ3hCRSxRQUFRUCx1Q0FBUSxHQUFHSyxHQUFHLENBQUMsR0FBRztJQUMxQkcsZUFBZVIsdUNBQVEsR0FBR1UsUUFBUSxDQUFDO0lBQ25DQyxLQUFLWCx1Q0FBUSxHQUFHVSxRQUFRLENBQUM7SUFDekJFLFVBQVVaLHdDQUFNLENBQUM7UUFBQztRQUFPO0tBQU0sRUFBRTtRQUMvQmMsVUFBVSxJQUFPO2dCQUFFQyxTQUFTO1lBQThCO0lBQzVEO0FBQ0YsR0FBRztBQUVJLE1BQU1DLHNCQUFzQmhCLHVDQUFRLENBQUM7SUFDMUNHLFFBQVFILHVDQUFRO0lBQ2hCaUIsS0FBS2pCLHVDQUFRLEdBQUdVLFFBQVEsR0FBR1EsUUFBUTtJQUNuQ04sVUFBVVosdUNBQVEsR0FBR2tCLFFBQVE7SUFDN0JDLFdBQVduQix3Q0FBUztJQUNwQnFCLE1BQU1yQix1Q0FBUSxHQUFHc0IsUUFBUTtJQUN6QkMsT0FBT3ZCLHVDQUFRLEdBQUdrQixRQUFRO0FBQzVCLEdBQUc7QUFFSSxNQUFNTSx3QkFBd0J4Qix1Q0FBUSxDQUFDO0lBQzVDRyxRQUFRSCx1Q0FBUTtJQUNoQnlCLFNBQVN6Qix1Q0FBUSxHQUFHVSxRQUFRLEdBQUdRLFFBQVE7SUFDdkNRLGdCQUFnQjFCLHVDQUFRLEdBQUdrQixRQUFRO0lBQ25DQyxXQUFXbkIsd0NBQVM7SUFDcEJxQixNQUFNckIsdUNBQVEsR0FBR3NCLFFBQVE7SUFDekJDLE9BQU92Qix1Q0FBUSxHQUFHa0IsUUFBUTtBQUM1QixHQUFHO0FBRUksTUFBTVMsd0JBQXdCMUIsbUJBQW1CMkIsTUFBTSxDQUFDO0lBQzdEQyxZQUFZN0IsdUNBQVEsR0FBR1UsUUFBUTtJQUMvQk8sS0FBS2pCLHVDQUFRLEdBQUdVLFFBQVEsR0FBR1EsUUFBUTtJQUNuQ1ksY0FBYzlCLHVDQUFRLEdBQUdVLFFBQVEsR0FBR1EsUUFBUTtJQUM1Q2EsVUFBVS9CLHVDQUFRLEdBQUdrQixRQUFRO0lBQzdCTyxTQUFTekIsdUNBQVEsR0FBR1UsUUFBUSxHQUFHUSxRQUFRO0lBQ3ZDUSxnQkFBZ0IxQix1Q0FBUSxHQUFHa0IsUUFBUTtJQUNuQ2MsT0FBT2hDLHdDQUFTLEdBQUdrQixRQUFRO0lBQzNCZSxrQkFBa0JqQyx1Q0FBUSxHQUFHa0IsUUFBUTtBQUN2QyxHQUFHO0FBRUksTUFBTWdCLDBCQUEwQmxDLHVDQUFRLENBQUM7SUFDOUNtQyxVQUFVbkMsc0NBQU8sQ0FBQzJCO0lBQ2xCVSxRQUFRckMsdUNBQVEsQ0FBQztRQUNmc0MsaUJBQWlCdEMsdUNBQVE7UUFDekJ1QyxtQkFBbUJ2Qyx1Q0FBUSxHQUFHa0IsUUFBUTtRQUN0Q3NCLGVBQWV4Qyx1Q0FBUSxHQUFHa0IsUUFBUTtRQUNsQ3VCLHNCQUFzQnpDLHVDQUFRLEdBQUdrQixRQUFRO0lBQzNDO0lBQ0F3QixTQUFTMUMsdUNBQVEsQ0FBQ0EsdUNBQVEsQ0FBQztRQUN6Qm1DLFVBQVVuQyxzQ0FBTyxDQUFDMkI7UUFDbEJFLFlBQVk3Qix1Q0FBUTtRQUNwQjhCLGNBQWM5Qix1Q0FBUSxHQUFHa0IsUUFBUTtRQUNqQ2EsVUFBVS9CLHVDQUFRLEdBQUdrQixRQUFRO1FBQzdCMEIsaUJBQWlCNUMsdUNBQVEsR0FBR2tCLFFBQVE7SUFDdEM7SUFDQTJCLGFBQWE3Qyx1Q0FBUSxHQUFHc0IsUUFBUTtBQUNsQyxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9ydGZvbGlvLWRhc2hib2FyZC8uL2FwcC9saWIvc2NoZW1hcy50cz9jNjA1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IEhvbGRpbmdJbnB1dFNjaGVtYSA9IHoub2JqZWN0KHtcclxuICBzeW1ib2w6IHouc3RyaW5nKCkubWluKDEsICdTeW1ib2wgaXMgcmVxdWlyZWQnKSxcclxuICBuYW1lOiB6LnN0cmluZygpLm1pbigxLCAnTmFtZSBpcyByZXF1aXJlZCcpLFxyXG4gIHNlY3Rvcjogei5zdHJpbmcoKS5taW4oMSwgJ1NlY3RvciBpcyByZXF1aXJlZCcpLFxyXG4gIHB1cmNoYXNlUHJpY2U6IHoubnVtYmVyKCkucG9zaXRpdmUoJ1B1cmNoYXNlIHByaWNlIG11c3QgYmUgcG9zaXRpdmUnKSxcclxuICBxdHk6IHoubnVtYmVyKCkucG9zaXRpdmUoJ1F1YW50aXR5IG11c3QgYmUgcG9zaXRpdmUnKSxcclxuICBleGNoYW5nZTogei5lbnVtKFsnTlNFJywgJ0JTRSddLCB7XHJcbiAgICBlcnJvck1hcDogKCkgPT4gKHsgbWVzc2FnZTogJ0V4Y2hhbmdlIG11c3QgYmUgTlNFIG9yIEJTRScgfSksXHJcbiAgfSksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IFF1b3RlUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgc3ltYm9sOiB6LnN0cmluZygpLFxyXG4gIGNtcDogei5udW1iZXIoKS5wb3NpdGl2ZSgpLm9wdGlvbmFsKCksXHJcbiAgZXhjaGFuZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBmcm9tQ2FjaGU6IHouYm9vbGVhbigpLFxyXG4gIGFzT2Y6IHouc3RyaW5nKCkuZGF0ZXRpbWUoKSxcclxuICBlcnJvcjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBNZXRyaWNzUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgc3ltYm9sOiB6LnN0cmluZygpLFxyXG4gIHBlUmF0aW86IHoubnVtYmVyKCkucG9zaXRpdmUoKS5vcHRpb25hbCgpLFxyXG4gIGxhdGVzdEVhcm5pbmdzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgZnJvbUNhY2hlOiB6LmJvb2xlYW4oKSxcclxuICBhc09mOiB6LnN0cmluZygpLmRhdGV0aW1lKCksXHJcbiAgZXJyb3I6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgSG9sZGluZ0VucmljaGVkU2NoZW1hID0gSG9sZGluZ0lucHV0U2NoZW1hLmV4dGVuZCh7XHJcbiAgaW52ZXN0bWVudDogei5udW1iZXIoKS5wb3NpdGl2ZSgpLFxyXG4gIGNtcDogei5udW1iZXIoKS5wb3NpdGl2ZSgpLm9wdGlvbmFsKCksXHJcbiAgcHJlc2VudFZhbHVlOiB6Lm51bWJlcigpLnBvc2l0aXZlKCkub3B0aW9uYWwoKSxcclxuICBnYWluTG9zczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxyXG4gIHBlUmF0aW86IHoubnVtYmVyKCkucG9zaXRpdmUoKS5vcHRpb25hbCgpLFxyXG4gIGxhdGVzdEVhcm5pbmdzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgc3RhbGU6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXHJcbiAgcG9ydGZvbGlvUGVyY2VudDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBQb3J0Zm9saW9SZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcclxuICBob2xkaW5nczogei5hcnJheShIb2xkaW5nRW5yaWNoZWRTY2hlbWEpLFxyXG4gIHRvdGFsczogei5vYmplY3Qoe1xyXG4gICAgdG90YWxJbnZlc3RtZW50OiB6Lm51bWJlcigpLFxyXG4gICAgdG90YWxQcmVzZW50VmFsdWU6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcclxuICAgIHRvdGFsR2Fpbkxvc3M6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcclxuICAgIHRvdGFsR2Fpbkxvc3NQZXJjZW50OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXHJcbiAgfSksXHJcbiAgc2VjdG9yczogei5yZWNvcmQoei5vYmplY3Qoe1xyXG4gICAgaG9sZGluZ3M6IHouYXJyYXkoSG9sZGluZ0VucmljaGVkU2NoZW1hKSxcclxuICAgIGludmVzdG1lbnQ6IHoubnVtYmVyKCksXHJcbiAgICBwcmVzZW50VmFsdWU6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcclxuICAgIGdhaW5Mb3NzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXHJcbiAgICBnYWluTG9zc1BlcmNlbnQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcclxuICB9KSksXHJcbiAgbGFzdFVwZGF0ZWQ6IHouc3RyaW5nKCkuZGF0ZXRpbWUoKSxcclxufSk7XHJcblxyXG5leHBvcnQgdHlwZSBIb2xkaW5nSW5wdXQgPSB6LmluZmVyPHR5cGVvZiBIb2xkaW5nSW5wdXRTY2hlbWE+O1xyXG5leHBvcnQgdHlwZSBIb2xkaW5nRW5yaWNoZWQgPSB6LmluZmVyPHR5cGVvZiBIb2xkaW5nRW5yaWNoZWRTY2hlbWE+O1xyXG5leHBvcnQgdHlwZSBRdW90ZVJlc3BvbnNlID0gei5pbmZlcjx0eXBlb2YgUXVvdGVSZXNwb25zZVNjaGVtYT47XHJcbmV4cG9ydCB0eXBlIE1ldHJpY3NSZXNwb25zZSA9IHouaW5mZXI8dHlwZW9mIE1ldHJpY3NSZXNwb25zZVNjaGVtYT47XHJcbmV4cG9ydCB0eXBlIFBvcnRmb2xpb1Jlc3BvbnNlID0gei5pbmZlcjx0eXBlb2YgUG9ydGZvbGlvUmVzcG9uc2VTY2hlbWE+O1xyXG4iXSwibmFtZXMiOlsieiIsIkhvbGRpbmdJbnB1dFNjaGVtYSIsIm9iamVjdCIsInN5bWJvbCIsInN0cmluZyIsIm1pbiIsIm5hbWUiLCJzZWN0b3IiLCJwdXJjaGFzZVByaWNlIiwibnVtYmVyIiwicG9zaXRpdmUiLCJxdHkiLCJleGNoYW5nZSIsImVudW0iLCJlcnJvck1hcCIsIm1lc3NhZ2UiLCJRdW90ZVJlc3BvbnNlU2NoZW1hIiwiY21wIiwib3B0aW9uYWwiLCJmcm9tQ2FjaGUiLCJib29sZWFuIiwiYXNPZiIsImRhdGV0aW1lIiwiZXJyb3IiLCJNZXRyaWNzUmVzcG9uc2VTY2hlbWEiLCJwZVJhdGlvIiwibGF0ZXN0RWFybmluZ3MiLCJIb2xkaW5nRW5yaWNoZWRTY2hlbWEiLCJleHRlbmQiLCJpbnZlc3RtZW50IiwicHJlc2VudFZhbHVlIiwiZ2Fpbkxvc3MiLCJzdGFsZSIsInBvcnRmb2xpb1BlcmNlbnQiLCJQb3J0Zm9saW9SZXNwb25zZVNjaGVtYSIsImhvbGRpbmdzIiwiYXJyYXkiLCJ0b3RhbHMiLCJ0b3RhbEludmVzdG1lbnQiLCJ0b3RhbFByZXNlbnRWYWx1ZSIsInRvdGFsR2Fpbkxvc3MiLCJ0b3RhbEdhaW5Mb3NzUGVyY2VudCIsInNlY3RvcnMiLCJyZWNvcmQiLCJnYWluTG9zc1BlcmNlbnQiLCJsYXN0VXBkYXRlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/schemas.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fportfolio%2Froute&page=%2Fapi%2Fportfolio%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fportfolio%2Froute.ts&appDir=D%3A%5CAssessment%20Task%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CAssessment%20Task&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();